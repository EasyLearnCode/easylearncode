{% extends "main.html" %}
{% block content %}
    {% raw %}
        <div class="container" data-ng-controller='ContestResultCtrl'>
            <div class="row">

                <div class="col-xs-8 col-md-8 highlight">

                    <div class="well" style="height:300px">
                        <div class="text-center text-success" style="font-size: 18px; font-weight: bold">Bảng xếp
                            hạng
                        </div>
                        <table class="table table-bordered table-condensed table-hover" ng-show="results">
                            <tr class="success">
                                <th>Hạng</th>
                                <th>Họ tên</th>
                                <th>Điểm</th>
                                <th>Xem</th>
                            </tr>
                            <tr data-ng-repeat="player in results|limitTo:resultQuantity">
                                <td>{{ $index+1 }}</td>
                                <td>{{ player.user.email }}</td>
                                <td>
                                    {{ player.score|number:2 }}
                                </td>

                                <td><a class="btn btn-info" ng-click="get_detail(player.user.Id)"><span
                                        class="glyphicon glyphicon-search"></span></a></td>
                            </tr>
                        </table>
                        <div ng-hide="results">
                            <p>Chưa có ai trong bảng xếp hạng của tuần. Chọn tuần khác để xem bảng xếp hạng trong
                                tuần.</p>
                        </div>
                        <button class="btn btn-success" data-ng-click="showMoreResult()"
                                ng-disabled="resultQuantity>=results.length"><i
                                class="fa fa-info-circle"></i> Xem Thêm
                        </button>
                    </div>
                    <div class="well" style="">
                        <div class="text-center text-success" style="font-size: 18px; font-weight: bold;">Bảng chi
                            tiết
                        </div>
                        <div ng-hide="details.run_code_result">Bạn hãy chọn xem trên bảng kết quả để xem chi tiết thành
                            tích của người đó.
                        </div>
                        <table class="table table-bordered table-condensed table-hover"
                               ng-show="details.run_code_result">
                            <tr class="success">
                                <th>STT</th>
                                <th>Họ tên</th>
                                <th>Level</th>
                                <th>Kết quả</th>
                                <th>Thời gian</th>
                                <th>Bộ nhớ</th>
                            </tr>
                            <tr data-ng-repeat="player in details.run_code_result">
                                <td>{{ $index+1 }}</td>
                                <td>{{ player.user.email }}</td>
                                <td>{{ player.level.level }}</td>
                                <td>
                                    <span ng-show="player.result" class="glyphicon glyphicon-ok"></span>
                                    <span ng-show="!player.result" class="glyphicon glyphicon-remove"></span>
                                    <br/>
                                    {{ player.score|number:2 }}
                                </td>

                                <td>{{ player.time_used|number:2 }}</td>
                                <td>{{ player.memory_used|number:2 }}</td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="col-xs-3 col-md-3 highlight">
                    <div class="panel panel-default affix">
                        <div class="panel-heading">Các tuần thi</div>
                        <div class="panel-body">
                            <span>Chọn tuần:</span>

                            <div class="list-group col-md-12">
                                <div ng-hide="weeks">Không có tuần thi trong tháng</div>
                                <a data-ng-repeat="week in weeks" class="btn list-group-item"
                                   ng-class="{active:week.Id==currentWeek}"
                                   data-ng-click="getThisResult(week.Id)">Tuần {{ week.week }}</a>

                            </div>
                            <div>
                                Tháng:
                                <select ng-model="month" ng-options="month.value for month in months">
                                </select>
                                Năm:
                                <select ng-model="year" ng-options="year.value for year in years"></select>
                                <button class="btn btn-primary" data-ng-click="get_weeks()"><span
                                        class="glyphicon glyphicon-search"></span></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endraw %}
{% endblock %}
{% block mediaJS %}
    <script>
        angular.module('services.utility').constant('csrf_token', '{{ csrf_token() }}');
    </script>
{% endblock %}